<%
  label_class = "col-lg-3 col-md-4 fw-bold text-md-end"
  data_class = "col-lg-9 col-md-8 "
%>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item active" aria-current="page">
      Images
    </li>
  </ol>
</nav>

<div class="input-group mb-3">
  <input type="text" class="form-control" placeholder="Search filenames, sources, grading sets, users">
  <button class="btn btn-outline-primary" type="button">Search Images</button>
  <a class="btn btn-outline-secondary" type="button" href="<%= url_for controller: 'images', action: 'new' %>">
    Upload Images
  </a>
</div>

<table class="table table-striped table-bordered align-middle">
  <thead>
    <tr>
      <th scope="col" style="vertical-align: middle;">
        <input class="form-check-input" type="checkbox" value="">
      </th>
      <th scope="col" colspan="2" style="vertical-align: middle;">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-sm btn-outline-primary">Add to grading set</button>
          <button type="button" class="btn btn-sm btn-outline-primary">Download</button>
          <button type="button" class="btn btn-sm btn-outline-primary">Archive</button>
        </div>
      </th>
    </tr>
  </thead>
  <tbody>
    <% @images.each do |image| %>
      <tr>
        <td style="width:1%;">
          <input class="form-check-input" type="checkbox" value="">
        </td>
        <td style="width:1%;">
          <a href="<%= url_for controller: 'images', action: 'show', id: image.id %>">
            <img src="<%= url_for image.image_file %>" 
              class="img-thumbnail"
              style="max-width: 150px;max-height: 150px;"
            >
          </a>
        </td>
        <td>
          <div class="row">
            <div class="col-md-6">
              <div class="row">
                <div class="<%= label_class %>">
                  Filename
                </div>
                <div class="<%= data_class %>">
                  <%= link_to image.filename, {controller: 'images', action: 'show', id: image.id} %>
                </div>
                <div class="<%= label_class %>">
                  Source
                </div>
                <div class="<%= data_class %>">
                  <a href="<%= url_for controller: 'images', image_source_id: image.image_source.id %>">
                    <%= image.image_source.name %>
                  </a>
                </div>
                <div class="<%= label_class %>">
                  Uploaded On
                </div>
                <div class="<%= data_class %>">
                  <%= image.created_at %>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="row">
                <div class="<%= label_class %>">
                  Grading Sets
                </div>
                <div class="<%= data_class %>">
                  <ul class="list-unstyled">
                    <% image.grading_sets.each do |grading_set| %>
                      <li>
                        <a href="<%= url_for controller: 'grading_sets', action: 'show', id: grading_set.id %>">
                          <%= grading_set.name %>
                        </a>
                      </li>
                    <% end %>
                  </ul>
                </div>  
              </div>  
            </div>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<nav aria-label="...">
  <ul class="pagination">
    <li class="page-item disabled">
      <a class="page-link">Previous</a>
    </li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item  disabled">
      <a class="page-link" href="#">Next</a>
    </li>
  </ul>
</nav>